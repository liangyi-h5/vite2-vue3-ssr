"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var o=require("vue"),u=require("vue/server-renderer"),y=require("vue-router"),w=require("pinia"),Z=require("path"),G=require("axios"),ee=require("qs");require("xlsx");function z(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var te=z(G),ne=z(ee);const U=Symbol();function se(e,n){e.push(n);function t(){const s=e.indexOf(n);s!==-1&&e.splice(s,1)}return o.onUnmounted(t),t}function g(e,...n){e.forEach(t=>t(...n))}function oe(e,n){let t,s;typeof e=="string"?(t=e,s=n):(s=e,t=e.id);const r=typeof n=="function";function a(){let l=o.getCurrentInstance()&&o.inject(U);if(l)return l._s.has(t)||(r?J(t,n,l):re(t,s,l)),l._s.get(t)}return a}function J(e,n,t){let s;const r=t._e.run(()=>(s=o.effectScope(),s.run(()=>n())));function a(i,c){return function(){const m=[],v=[];function $(_){m.push(_)}function x(_){v.push(_)}g(l,{after:$,onError:x,store:p,name:i});let b;try{b=c.apply(p,arguments)}catch(_){g(v,_)}return b instanceof Promise?b.then(_=>{g(m,_)}).catch(_=>(g(v,_),Promise.reject(_))):(g(m,b),b)}}for(const i in r){const c=r[i];typeof c=="function"&&(r[i]=a(i,c))}function d(i){typeof i=="function"?i(p):K(p,i)}let l=[];const f={$patch:d,$subscribe(i,c){s.run(()=>o.watch(t.state.value[e],m=>{i({type:"dirct"},m)},c))},$onAction:se.bind(null,l),$dispose:()=>{s.stop(),l=[],t._s.delete(e)}},p=o.reactive(f);return Object.defineProperty(p,"$state",{get:()=>t.state.value[e],set:i=>d(c=>Object.assign(c,i))}),Object.assign(p,r),t._p.forEach(i=>Object.assign(p,i({store:p,pinia:t,app:t._a,id:e}))),t._s.set(e,p),p}function re(e,n,t){let{state:s,getters:r,actions:a}=n;function d(){t.state.value[e]=s?s():{};const f=o.toRefs(t.state.value[e]);return Object.assign(f,a,Object.keys(r||{}).reduce((p,i)=>(p[i]=o.computed(()=>r[i].call(l,l)),p),{}))}const l=J(e,d,t);return l.$reset=function(){const f=s?s():{};l.$patch(p=>{Object.assign(p,f)})},l}function K(e,n){for(let t in n){if(!n.hasOwnProperty(t))continue;const s=e[t],r=n[t];A(s)&&A(r)&&o.isRef(r)?e[t]=K(s,r):e[t]=r}return e}const A=e=>typeof e=="object"&&e!==null,j=w.defineStore("index",{state:()=>({ip:"",a:"init state"}),actions:{setIp(e){this.ip=e},increment(e){this.a=e}}}),Q=e=>(console.log(Q,"currency"),`$${e}`),ae=oe("index",{state:()=>({a:"12",$t:Q,currency:"$"}),getters:{},actions:{increment(e){}}});const ue=e=>{const n=te.default.create({baseURL:"http://localhost:3000/api",timeout:59e3,withCredentials:!1});return n.interceptors.request.use(t=>{var r;const s=(r=t.method)==null?void 0:r.toLocaleLowerCase();return(s==="post"||s==="put"||s==="delete")&&Object.prototype.toString.call(t.data)!=="[object FormData]"&&(t.data=ne.default.stringify(t.data)),t}),n.interceptors.response.use(t=>{let s;t.data===void 0?s=JSON.parse(t.request.responseText):s=t.data;const r=new Error(s.msg||s.message);switch(s.code||s.status){case 200:return s.data||s.content;default:return console.log("interceptors.response default",s,t),Promise.reject(r)}},t=>{if(t&&t.response)switch(t.response.status){case 400:t.message="Bad Request";break;case 403:t.message="Forbidden";break;case 404:t.message="Not Found";break;case 500:t.message="Internal Server Error";break;default:t.message=`Connection error ${t.status}`}else t.message.indexOf("timeout")!==-1?t={status:503,message:"The network connection is temporarily unavailable. Please refresh the page and try again.",time_out:!0}:t.message.indexOf("canceled")!==-1&&(t.status=400);return Promise.reject(t)}),n};async function ce(e){try{const n=j();return await ue(n)(e)}catch(n){return Promise.reject(n)}}const ie=e=>ce({url:"/get/access_info",method:"get",params:e}),h=w.defineStore("accessInfo",{state:()=>({visits:0,numberOfVisits:0,hasData:!1}),actions:{setData(e){this.visits=e.visits,this.numberOfVisits=e.numberOfVisits,this.hasData=!0},async getPageData(){try{const e=await ie();return this.setData(e),e}catch(e){return console.log(e),Promise.resolve(e)}}}}),C=o.defineComponent({name:"Header",__ssrInlineRender:!0,setup(e){const n=h();return(t,s,r,a)=>{s("<!--[-->"),u.ssrRenderSuspense(s,{default:()=>{s(`<p>\u8BBF\u95EE\u4EBA\u6B21\uFF1A ${u.ssrInterpolate(o.unref(n).visits)}</p>`)},_:1}),u.ssrRenderSuspense(s,{default:()=>{s(`<p>\u8BBF\u95EE\u4EBA\u6570\uFF1A ${u.ssrInterpolate(o.unref(n).numberOfVisits)}</p>`)},_:1}),s("<!--]-->")}}}),T=C.setup;C.setup=(e,n)=>{const t=o.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/Header.vue"),T?T(e,n):void 0};const R=o.defineComponent({name:"App",__ssrInlineRender:!0,setup(e){const n=y.useRouter(),t=y.useRoute(),s=h();return o.watchEffect(()=>{console.log(s.visits,"watch")}),o.onMounted(()=>{console.log(t,n)}),(r,a,d,l)=>{const f=o.resolveComponent("router-link"),p=o.resolveComponent("router-view");a("<!--[-->"),a(u.ssrRenderComponent(C,null,null,d)),a(u.ssrRenderComponent(f,{to:"/"},{default:o.withCtx((i,c,m,v)=>{if(c)c("home");else return[o.createTextVNode("home")]}),_:1},d)),a("<br>"),a(u.ssrRenderComponent(f,{to:"/about"},{default:o.withCtx((i,c,m,v)=>{if(c)c("about");else return[o.createTextVNode("about")]}),_:1},d)),a("<br>"),a(u.ssrRenderComponent(f,{to:"/json-to-excel"},{default:o.withCtx((i,c,m,v)=>{if(c)c("json to excel");else return[o.createTextVNode("json to excel")]}),_:1},d)),a(u.ssrRenderComponent(p,null,{default:o.withCtx(({Component:i},c,m,v)=>{if(c)u.ssrRenderSuspense(c,{default:()=>{u.ssrRenderVNode(c,o.createVNode(o.resolveDynamicComponent(i),null,null),m,v)},_:2});else return[(o.openBlock(),o.createBlock(o.Suspense,null,{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(i)))]),_:2},1024))]}),_:1},d)),a("<!--]-->")}}}),D=R.setup;R.setup=(e,n)=>{const t=o.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/App.vue"),D?D(e,n):void 0};const le=()=>Promise.resolve().then(function(){return Pe}),de=()=>Promise.resolve().then(function(){return ke}),pe=()=>Promise.resolve().then(function(){return Be});var fe=[{path:"/",name:"home",component:le,meta:{metaInfo:{title:"\u9996\u9875",meta:'<meta property="\u9996\u9875 seo\u5185\u5BB9" content="\u5185\u5BB9">'},store:{storeModule:"accessInfo",storeName:"useAccessInfoStore"}}},{path:"/json-to-excel",name:"json-to-excel",component:de,meta:{metaInfo:{title:"json\u8F6Cexcel",meta:'<meta property="json-to-excel seo\u5185\u5BB9" content="\u5185\u5BB9">'}}},{path:"/mini-pinia",name:"mini-pinia",component:pe,meta:{metaInfo:{title:"mini-pinia",meta:'<meta property="mini-pinia seo\u5185\u5BB9" content="\u5185\u5BB9">'}}}];const me=()=>Promise.resolve().then(function(){return Ae});var _e=[{path:"/about",name:"about",component:me,meta:{metaInfo:{title:"\u5173\u4E8E\u6211\u4EEC",meta:'<meta property="\u5173\u4E8E\u6211\u4EEC seo\u5185\u5BB9" content="\u5185\u5BB9">'}}}];const ve=[...fe,..._e];function be(){return y.createRouter({history:y.createMemoryHistory(),routes:ve})}const ge=()=>{const e=o.effectScope(!0),n=e.run(()=>o.ref({})),t=[],s=o.markRaw({install:r=>{s._a=r,r.provide(U,s),r.config.globalProperties.$miniPinia=s},_p:t,_a:null,state:n,_e:e,_s:new Map});return s};function he(){const e=o.createSSRApp(R),n=be();n.beforeEach((r,a)=>{}),e.use(n);const t=w.createPinia(),s=ge();return e.use(t),e.use(s),{app:e,router:n,minipinia:s,pinia:t}}async function xe(e,n,t={},s=!1){const{app:r,router:a,minipinia:d,pinia:l}=he();a.push(e),await a.isReady();const f=j();t.ip&&f.setIp(t.ip);const p=a.currentRoute,i=p.value.matched;if(p.value.matched.length>0&&!s){const x=[];i.forEach(_=>{x.push(...Object.values(_.components))});const b=x.map(_=>{const B=_.asyncData||null;if(B)return B({store:l,route:p})});await Promise.all(b)}const c={},m=await u.renderToString(r,c),v=a.currentRoute.value.meta.metaInfo||{},$=ye(c.modules,n);return[m,$,v,d,l]}function ye(e,n){let t="";const s=new Set;return e.forEach(r=>{const a=n[r];a&&a.forEach(d=>{if(!s.has(d)){s.add(d);const l=Z.basename(d);if(n[l])for(const f of n[l])t+=V(f),s.add(f);t+=V(d)}})}),t}function V(e){return console.log(e,"file"),e.endsWith(".js")?`<link rel="modulepreload" crossorigin href="${e}">`:e.endsWith(".css")?`<link rel="stylesheet" href="${e}">`:e.endsWith(".woff")?` <link rel="preload" href="${e}" as="font" type="font/woff" crossorigin>`:e.endsWith(".woff2")?` <link rel="preload" href="${e}" as="font" type="font/woff2" crossorigin>`:e.endsWith(".gif")?` <link rel="preload" href="${e}" as="image" type="image/gif">`:e.endsWith(".jpg")||e.endsWith(".jpeg")?` <link rel="preload" href="${e}" as="image" type="image/jpeg">`:e.endsWith(".png")?` <link rel="preload" href="${e}" as="image" type="image/png">`:""}var Se="/assets/webp/122.8a143d28.webp",$e=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"})),X="/assets/png/logo.03d6d6da.png",we=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));const je=e=>{const n=`../assets/image/${e}`,t={"../assets/image/122.webp":$e,"../assets/image/logo.png":we};return t[n]?t[n].default:(console.warn("\u6CA1\u6709\u8BE5\u8D44\u6E90"),"")};var S=(e,n)=>{const t=e.__vccOpts||e;for(const[s,r]of n)t[s]=r;return t};const I=o.defineComponent({name:"HelloWorld",__ssrInlineRender:!0,props:{msg:null},setup(e){const n=h(),t=o.ref(0);return(s,r,a,d)=>{r(`<!--[--><h1 data-v-0e7df4f4>${u.ssrInterpolate(e.msg)}</h1><h1 data-v-0e7df4f4>${u.ssrInterpolate(o.unref(n).visits)}</h1><h1 data-v-0e7df4f4>${u.ssrInterpolate(o.unref(n).numberOfVisits)}</h1><p data-v-0e7df4f4> Recommended IDE setup: <a href="https://code.visualstudio.com/" target="_blank" data-v-0e7df4f4>VSCode</a> + <a href="https://github.com/johnsoncodehk/volar" target="_blank" data-v-0e7df4f4>Volar</a></p><p data-v-0e7df4f4>See <code data-v-0e7df4f4>README.md</code> for more information.</p><p data-v-0e7df4f4><a href="https://vitejs.dev/guide/features.html" target="_blank" data-v-0e7df4f4> Vite Docs </a> | <a href="https://v3.vuejs.org/" target="_blank" data-v-0e7df4f4>Vue 3 Docs</a></p><button type="button" data-v-0e7df4f4>count is: ${u.ssrInterpolate(t.value)}</button><p data-v-0e7df4f4> Edit <code data-v-0e7df4f4>components/HelloWorld.vue</code> to test hot module replacement. </p><!--]-->`)}}}),F=I.setup;I.setup=(e,n)=>{const t=o.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/HelloWorld.vue"),F?F(e,n):void 0};var Ce=S(I,[["__scopeId","data-v-0e7df4f4"]]);const P=o.defineComponent({components:{HelloWorld:Ce},async setup(){return h(),{img:X,getAssetsHomeFile:je}},async asyncData(){return await h().getPageData()}});function Re(e,n,t,s,r,a,d,l){const f=o.resolveComponent("router-link"),p=o.resolveComponent("HelloWorld");n(`<div${u.ssrRenderAttrs(o.mergeProps({class:"home"},s))} data-v-8087b51a><img${u.ssrRenderAttr("src",e.getAssetsHomeFile("logo.png"))} alt="3221qwrqw34" data-v-8087b51a><br data-v-8087b51a><img${u.ssrRenderAttr("src",e.img)} alt="3221qwrqw34" data-v-8087b51a><br data-v-8087b51a>`),n(u.ssrRenderComponent(f,{to:"/about"},{default:o.withCtx((i,c,m,v)=>{if(c)c("about");else return[o.createTextVNode("about")]}),_:1},t)),n("<br data-v-8087b51a>"),n(u.ssrRenderComponent(f,{to:"/json-to-excel"},{default:o.withCtx((i,c,m,v)=>{if(c)c("json to excel");else return[o.createTextVNode("json to excel")]}),_:1},t)),n(u.ssrRenderComponent(p,{msg:"hello"},null,t)),n("</div>")}const M=P.setup;P.setup=(e,n)=>{const t=o.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/view/home/home.vue"),M?M(e,n):void 0};var Ie=S(P,[["ssrRender",Re],["__scopeId","data-v-8087b51a"]]),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"}));const Y=()=>{console.log("hook")};const E=o.defineComponent({name:"jsonToExcel",__ssrInlineRender:!0,setup(e){Y();const n=o.ref("");return o.onMounted(()=>{const t=document.querySelector("#ipt");t&&t.addEventListener("change",s=>{const r=new FileReader;r.readAsText(s.target.files[0],"UTF-8"),r.onload=a=>{const d=a.target.result;console.log(d,"fileContent")}})}),(t,s,r,a)=>{s(`<div${u.ssrRenderAttrs(o.mergeProps({class:"json-to-excel"},a))} data-v-64b338f8><textarea class="textarea" data-v-64b338f8>${u.ssrInterpolate(n.value)}</textarea><br data-v-64b338f8><button data-v-64b338f8>json to excel</button><br data-v-64b338f8><input id="ipt" accept=".json" type="file" data-v-64b338f8>excel to json<br data-v-64b338f8></div>`)}}}),W=E.setup;E.setup=(e,n)=>{const t=o.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/view/jsonToExcel/jsonToExcel.vue"),W?W(e,n):void 0};var Ee=S(E,[["__scopeId","data-v-64b338f8"]]),ke=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"}));const k=o.defineComponent({name:"MiniPiniaVue",created(){console.log("created")},mounted(){}});function Oe(e,n,t,s,r,a,d,l){n(`<div${u.ssrRenderAttrs(o.mergeProps({class:""},s))}> mini + </div>`)}const H=k.setup;k.setup=(e,n)=>{const t=o.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/miniPinia/miniPinia.vue"),H?H(e,n):void 0};var qe=S(k,[["ssrRender",Oe]]);const O=o.defineComponent({name:"index",__ssrInlineRender:!0,setup(e){const n=ae(),t=o.ref(""),s=j();return s.increment("server state"),(r,a,d,l)=>{a(`<div${u.ssrRenderAttrs(o.mergeProps({class:"mini-pinia"},l))}><input type="text"${u.ssrRenderAttr("value",t.value)}><br><button>btn</button><br><span>${u.ssrInterpolate(o.unref(n).a)}</span><br><span>${u.ssrInterpolate(o.unref(n).$t("213"))}</span><br><span>${u.ssrInterpolate(o.unref(s).a)}</span><br>`),a(u.ssrRenderComponent(qe,null,null,d)),a("</div>")}}}),L=O.setup;O.setup=(e,n)=>{const t=o.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/view/miniPinia/index.vue"),L?L(e,n):void 0};var Be=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));const q=o.defineComponent({name:"about",__ssrInlineRender:!0,setup(e){Y(),console.log("about");const n="about";return(t,s,r,a)=>{s(`<div${u.ssrRenderAttrs(o.mergeProps({class:"home"},a))}>${u.ssrInterpolate(n)}</div>`)}}}),N=q.setup;q.setup=(e,n)=>{const t=o.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/view/about/about.vue"),N?N(e,n):void 0};var Ae=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));exports.render=xe;
